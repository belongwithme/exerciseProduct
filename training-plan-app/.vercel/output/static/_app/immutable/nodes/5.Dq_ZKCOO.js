import"../chunks/CWj6FrbW.js";import{i as Ut}from"../chunks/DvY-oIkD.js";import{G as it,q as X,b as g,p as te,at as re,o as oe,l as Bt,aZ as H,a as ne,f as w,d as a,r as e,s as r,t as I,j as k,g as t,u as n,y as Wt,e as K,m as z,n as lt,c as ee,i as _,b2 as _e,b3 as pe,v as he,h as be,$ as xe}from"../chunks/OdQOizuy.js";import{i as A,s as $e,a as ye}from"../chunks/C8SgvbjV.js";import{g as At}from"../chunks/BRzFZVPj.js";import{u as ke}from"../chunks/CEWoIMHy.js";import{e as Gt,i as Kt}from"../chunks/CZywz5Xw.js";import{s as we}from"../chunks/BXCeKLx5.js";import{s as Xt}from"../chunks/BZ6qwgwY.js";import{l as yt,s as kt,p as $t}from"../chunks/iScJf1SD.js";import{s as wt}from"../chunks/AOTWZyJM.js";import{I as Dt}from"../chunks/hDZfQjOx.js";import{C as Qt}from"../chunks/T8cJUWXe.js";import{X as De}from"../chunks/C5W0R8hy.js";import{c as Ce}from"../chunks/CuU2NWP3.js";function de(D,i){const o=yt(i,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.525.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const u=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"}]];Dt(D,kt({name:"activity"},()=>o,{get iconNode(){return u},children:(s,p)=>{var v=it(),f=X(v);wt(f,i,"default",{}),g(s,v)},$$slots:{default:!0}}))}function Me(D,i){const o=yt(i,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.525.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const u=[["path",{d:"m15 18-6-6 6-6"}]];Dt(D,kt({name:"chevron-left"},()=>o,{get iconNode(){return u},children:(s,p)=>{var v=it(),f=X(v);wt(f,i,"default",{}),g(s,v)},$$slots:{default:!0}}))}function Ne(D,i){const o=yt(i,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.525.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const u=[["path",{d:"m9 18 6-6-6-6"}]];Dt(D,kt({name:"chevron-right"},()=>o,{get iconNode(){return u},children:(s,p)=>{var v=it(),f=X(v);wt(f,i,"default",{}),g(s,v)},$$slots:{default:!0}}))}function ce(D,i){const o=yt(i,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.525.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const u=[["path",{d:"M12 6v6l4 2"}],["circle",{cx:"12",cy:"12",r:"10"}]];Dt(D,kt({name:"clock"},()=>o,{get iconNode(){return u},children:(s,p)=>{var v=it(),f=X(v);wt(f,i,"default",{}),g(s,v)},$$slots:{default:!0}}))}function Se(D,i){const o=yt(i,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.525.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const u=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"}]];Dt(D,kt({name:"flame"},()=>o,{get iconNode(){return u},children:(s,p)=>{var v=it(),f=X(v);wt(f,i,"default",{}),g(s,v)},$$slots:{default:!0}}))}function ue(D,i){const o=yt(i,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.525.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const u=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"}]];Dt(D,kt({name:"heart"},()=>o,{get iconNode(){return u},children:(s,p)=>{var v=it(),f=X(v);wt(f,i,"default",{}),g(s,v)},$$slots:{default:!0}}))}function Te(D,i){const o=yt(i,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.525.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const u=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"}]];Dt(D,kt({name:"message-circle"},()=>o,{get iconNode(){return u},children:(s,p)=>{var v=it(),f=X(v);wt(f,i,"default",{}),g(s,v)},$$slots:{default:!0}}))}function ge(D,i){const o=yt(i,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.525.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const u=[["path",{d:"M16 7h6v6"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17"}]];Dt(D,kt({name:"trending-up"},()=>o,{get iconNode(){return u},children:(s,p)=>{var v=it(),f=X(v);wt(f,i,"default",{}),g(s,v)},$$slots:{default:!0}}))}function je(D,i){const o=yt(i,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.525.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const u=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]];Dt(D,kt({name:"triangle-alert"},()=>o,{get iconNode(){return u},children:(s,p)=>{var v=it(),f=X(v);wt(f,i,"default",{}),g(s,v)},$$slots:{default:!0}}))}function ve(D,i){const o=yt(i,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.525.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const u=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"}]];Dt(D,kt({name:"zap"},()=>o,{get iconNode(){return u},children:(s,p)=>{var v=it(),f=X(v);wt(f,i,"default",{}),g(s,v)},$$slots:{default:!0}}))}var Le=w('<div class="weekday-cell svelte-1u6tg49"> </div>'),Pe=w('<span class="status-emoji svelte-1u6tg49"> </span>'),qe=w('<div class="log-dot svelte-1u6tg49"></div>'),ze=w('<span class="log-count-plus svelte-1u6tg49">+</span>'),Ae=w('<div class="status-indicators svelte-1u6tg49"><!> <div class="log-count-dots svelte-1u6tg49"><!> <!></div></div>'),We=w('<button><span class="day-number svelte-1u6tg49"> </span> <!></button>'),Ie=w('<div class="calendar-container svelte-1u6tg49"><div class="calendar-header svelte-1u6tg49"><div class="flex items-center space-x-4"><button class="p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200 text-gray-600 hover:text-gray-800" aria-label="上个月"><!></button> <h2 class="calendar-title svelte-1u6tg49"><!> </h2> <button class="p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200 text-gray-600 hover:text-gray-800" aria-label="下个月"><!></button></div> <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 text-sm font-medium">今天</button></div> <div class="weekdays-header svelte-1u6tg49"></div> <div class="calendar-grid svelte-1u6tg49"></div> <div class="calendar-legend svelte-1u6tg49"><div class="legend-section svelte-1u6tg49"><span class="legend-title svelte-1u6tg49">训练强度:</span> <div class="heatmap-legend svelte-1u6tg49"><div class="legend-item svelte-1u6tg49"><div class="legend-box heat-1 svelte-1u6tg49"></div> <span>轻度</span></div> <div class="legend-item svelte-1u6tg49"><div class="legend-box heat-2 svelte-1u6tg49"></div> <span>中度</span></div> <div class="legend-item svelte-1u6tg49"><div class="legend-box heat-3 svelte-1u6tg49"></div> <span>高度</span></div> <div class="legend-item svelte-1u6tg49"><div class="legend-box heat-4 svelte-1u6tg49"></div> <span>极高</span></div></div></div> <div class="legend-section svelte-1u6tg49"><span class="legend-title svelte-1u6tg49">状态:</span> <div class="status-legend svelte-1u6tg49"><span>🟢 良好</span> <span>🟡 疲劳</span> <span>🔴 低效</span> <span>🔵 一般</span></div></div></div></div>');function Oe(D,i){te(i,!1);let o=$t(i,"calendarData",24,()=>[]),u=$t(i,"currentYear",28,()=>new Date().getFullYear()),s=$t(i,"currentMonth",28,()=>new Date().getMonth()+1);const p=re();let v=z([]),f=z("");const T=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],V=["日","一","二","三","四","五","六"];function Z(){const m=u(),l=s()-1,y=new Date(m,l,1),M=new Date(m,l+1,0),at=y.getDay(),P=new Date(m,l,0).getDate(),L=[],st=new Date().toISOString().split("T")[0];for(let C=at-1;C>=0;C--){const O=P-C,E=new Date(m,l-1,O).toISOString().split("T")[0];L.push({date:O,fullDate:E,isCurrentMonth:!1,isToday:!1,data:o().find(Y=>Y.date===E)})}const q=M.getDate();for(let C=1;C<=q;C++){const O=new Date(m,l,C).toISOString().split("T")[0];L.push({date:C,fullDate:O,isCurrentMonth:!0,isToday:O===st,data:o().find(E=>E.date===O)})}const W=42-L.length;for(let C=1;C<=W;C++){const O=new Date(m,l+1,C).toISOString().split("T")[0];L.push({date:C,fullDate:O,isCurrentMonth:!1,isToday:!1,data:o().find(E=>E.date===O)})}_(v,L),_(f,T[l])}function dt(){s()===1?(s(12),u(u()-1)):s(s()-1),p("monthChange",{year:u(),month:s()})}function mt(){s()===12?(s(1),u(u()+1)):s(s()+1),p("monthChange",{year:u(),month:s()})}function ft(){const m=new Date;u(m.getFullYear()),s(m.getMonth()+1),p("monthChange",{year:u(),month:s()})}function Ct(m){m.isCurrentMonth&&p("dayClick",{date:m.fullDate,data:m.data})}function ct(m){if(!m||m.log_count===0)return"";const l=m.total_duration_minutes||0,y=m.log_count,M=Math.min(l/60+y*.5,4);return M>=3?"heat-4":M>=2?"heat-3":M>=1?"heat-2":"heat-1"}function _t(m){if(!m)return"";switch(m){case"状态良好":return"🟢";case"精力充沛":return"🟢";case"疲劳":return"🟡";case"低效率":return"🔴";case"一般":return"🔵";default:return"⚪"}}function Mt(m){if(!m.data||m.data.log_count===0)return`${m.fullDate} - 无训练记录`;const{log_count:l,total_duration_minutes:y,status_summary:M,mood_summary:at}=m.data;let j=`${m.fullDate}
`;return j+=`训练次数: ${l}次
`,y&&(j+=`训练时长: ${Math.round(y/60*10)/10}小时
`),M&&(j+=`状态: ${M}
`),at&&(j+=`心情: ${at}`),j.trim()}oe(()=>{Z()}),Bt(()=>(H(u()),H(s()),H(o())),()=>{u()&&s()&&o()&&Z()}),ne(),Ut();var vt=Ie(),x=a(vt),h=a(x),$=a(h),et=a($);Me(et,{class:"w-5 h-5"}),e($);var J=r($,2),pt=a(J);Qt(pt,{class:"w-6 h-6 mr-2"});var Tt=r(pt);e(J);var ut=r(J,2),It=a(ut);Ne(It,{class:"w-5 h-5"}),e(ut),e(h);var ht=r(h,2);e(x);var gt=r(x,2);Gt(gt,5,()=>V,Kt,(m,l)=>{var y=Le(),M=a(y,!0);e(y),I(()=>k(M,t(l))),g(m,y)}),e(gt);var jt=r(gt,2);Gt(jt,5,()=>t(v),Kt,(m,l)=>{var y=We(),M=a(y),at=a(M,!0);e(M);var j=r(M,2);{var P=L=>{var B=Ae(),st=a(B);{var q=Y=>{var Q=Pe(),bt=a(Q,!0);e(Q),I(Nt=>k(bt,Nt),[()=>(t(l),n(()=>_t(t(l).data.status_summary)))],Wt),g(Y,Q)};A(st,Y=>{t(l),n(()=>t(l).data.status_summary)&&Y(q)})}var W=r(st,2),C=a(W);Gt(C,1,()=>(t(l),n(()=>Array(Math.min(t(l).data.log_count,3)))),Kt,(Y,Q)=>{var bt=qe();g(Y,bt)});var O=r(C,2);{var E=Y=>{var Q=ze();g(Y,Q)};A(O,Y=>{t(l),n(()=>t(l).data.log_count>3)&&Y(E)})}e(W),e(B),g(L,B)};A(j,L=>{t(l),n(()=>t(l).data&&t(l).data.log_count>0)&&L(P)})}e(y),I((L,B)=>{Xt(y,1,`calendar-day relative w-full h-16 rounded-lg border border-gray-200 p-1 transition-all duration-200 text-left hover:border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 ${t(l),n(()=>t(l).isCurrentMonth?"current-month":"other-month")??""} 
					${t(l),n(()=>t(l).isToday?"today":"")??""} 
					${L??""}`,"svelte-1u6tg49"),we(y,"title",B),y.disabled=(t(l),n(()=>!t(l).isCurrentMonth)),k(at,(t(l),n(()=>t(l).date)))},[()=>(t(l),n(()=>ct(t(l).data))),()=>(t(l),n(()=>Mt(t(l))))],Wt),K("click",y,()=>Ct(t(l))),g(m,y)}),e(jt),lt(2),e(vt),I(()=>k(Tt,` ${u()??""}年 ${t(f)??""}`)),K("click",$,dt),K("click",ut,mt),K("click",ht,ft),g(D,vt),ee()}var Ee=w('<div class="stat-item svelte-1m2g2l0"><!> <div><div class="stat-value svelte-1m2g2l0"> </div> <div class="stat-label svelte-1m2g2l0">总时长</div></div></div>'),Ye=w('<div class="stat-item svelte-1m2g2l0"><!> <div><div><span class="status-emoji svelte-1m2g2l0"> </span> </div> <div class="stat-label svelte-1m2g2l0">主要状态</div></div></div>'),Re=w('<div class="mood-summary svelte-1m2g2l0"><!> <span class="mood-text svelte-1m2g2l0"> </span></div>'),Fe=w("<!> <span> </span>",1),Ze=w("<span> </span>"),Be=w('<span class="mood-badge svelte-1m2g2l0"> </span>'),He=w('<div class="log-meta svelte-1m2g2l0"><!> <!></div>'),Ve=w('<div class="exercise-item svelte-1m2g2l0"><span class="exercise-name svelte-1m2g2l0"> </span> <span class="exercise-sets svelte-1m2g2l0"> <!></span></div>'),Ge=w('<div class="exercise-summary svelte-1m2g2l0"><div class="exercise-count svelte-1m2g2l0"> </div> <div class="exercise-list svelte-1m2g2l0"></div></div>'),Ke=w('<div class="workout-log-item svelte-1m2g2l0"><div class="log-header svelte-1m2g2l0"><div class="log-time svelte-1m2g2l0"><!></div> <button class="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm">编辑</button></div> <!> <!></div>'),Xe=w('<div class="day-summary svelte-1m2g2l0"><div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"><div class="stat-item svelte-1m2g2l0"><!> <div><div class="stat-value svelte-1m2g2l0"> </div> <div class="stat-label svelte-1m2g2l0">训练次数</div></div></div> <!> <!></div> <!></div> <div class="workout-logs-section svelte-1m2g2l0"><h3 class="section-title svelte-1m2g2l0">训练详情</h3> <div class="workout-logs-list svelte-1m2g2l0"></div></div>',1),Je=w('<div class="no-data svelte-1m2g2l0"><div class="no-data-icon svelte-1m2g2l0">📊</div> <h3 class="no-data-title svelte-1m2g2l0">这一天还没有训练记录</h3> <p class="no-data-description svelte-1m2g2l0">点击下方按钮开始记录今天的训练</p></div>'),Qe=w('<div class="modal-backdrop svelte-1m2g2l0" role="dialog" aria-modal="true" aria-labelledby="modal-title"><div class="modal-content svelte-1m2g2l0"><div class="modal-header svelte-1m2g2l0"><h2 id="modal-title" class="modal-title svelte-1m2g2l0"><!> </h2> <button class="p-2 rounded-lg hover:bg-gray-100 transition-colors text-gray-500 hover:text-gray-700" aria-label="关闭"><!></button></div> <div class="modal-body svelte-1m2g2l0"><!></div> <div class="modal-footer svelte-1m2g2l0"><button class="create-log-button svelte-1m2g2l0"> </button> <button class="cancel-button svelte-1m2g2l0">关闭</button></div></div></div>');function Ue(D,i){te(i,!1);let o=$t(i,"isOpen",8,!1),u=$t(i,"selectedDate",8,""),s=$t(i,"calendarData",8,null),p=$t(i,"workoutLogs",24,()=>[]);const v=re();function f(){v("close")}function T(x){const h=new Date(x),$=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];return`${h.getFullYear()}年${(h.getMonth()+1).toString().padStart(2,"0")}月${h.getDate().toString().padStart(2,"0")}日 ${$[h.getDay()]}`}function V(x){if(!x)return"未记录";const h=Math.floor(x/60),$=x%60;return h>0?`${h}小时${$}分钟`:`${$}分钟`}function Z(x){switch(x){case"状态良好":case"精力充沛":return{color:"text-green-600",bg:"bg-green-100",emoji:"🟢"};case"疲劳":return{color:"text-yellow-600",bg:"bg-yellow-100",emoji:"🟡"};case"低效率":return{color:"text-red-600",bg:"bg-red-100",emoji:"🔴"};case"一般":return{color:"text-blue-600",bg:"bg-blue-100",emoji:"🔵"};default:return{color:"text-gray-600",bg:"bg-gray-100",emoji:"⚪"}}}function dt(){v("createLog",{date:u()}),f()}function mt(x){v("editLog",{logId:x}),f()}function ft(x){x.target===x.currentTarget&&f()}function Ct(x){x.key==="Escape"&&f()}function ct(x){return x.reduce((h,$)=>(h[$.exercise_name]||(h[$.exercise_name]=[]),h[$.exercise_name].push($),h),{})}Ut();var _t=it(),Mt=X(_t);{var vt=x=>{var h=Qe(),$=a(h),et=a($),J=a(et),pt=a(J);de(pt,{class:"w-6 h-6 mr-2 text-blue-600"});var Tt=r(pt);e(J);var ut=r(J,2),It=a(ut);De(It,{class:"w-5 h-5"}),e(ut),e(et);var ht=r(et,2),gt=a(ht);{var jt=j=>{var P=Xe(),L=X(P),B=a(L),st=a(B),q=a(st);de(q,{class:"w-5 h-5 text-blue-600"});var W=r(q,2),C=a(W),O=a(C,!0);e(C),lt(2),e(W),e(st);var E=r(st,2);{var Y=R=>{var d=Ee(),U=a(d);ce(U,{class:"w-5 h-5 text-green-600"});var tt=r(U,2),G=a(tt),xt=a(G,!0);e(G),lt(2),e(tt),e(d),I(Pt=>k(xt,Pt),[()=>(H(s()),n(()=>V(s().total_duration_minutes)))],Wt),g(R,d)};A(E,R=>{H(s()),n(()=>s().total_duration_minutes)&&R(Y)})}var Q=r(E,2);{var bt=R=>{var d=Ye(),U=a(d);ue(U,{class:"w-5 h-5 text-purple-600"});var tt=r(U,2),G=a(tt),xt=a(G),Pt=a(xt,!0);e(xt);var Yt=r(xt);e(G),lt(2),e(tt),e(d),I((Rt,Ft)=>{Xt(G,1,`stat-value status-badge ${Rt??""}`,"svelte-1m2g2l0"),k(Pt,Ft),k(Yt,` ${H(s()),n(()=>s().status_summary)??""}`)},[()=>(H(s()),n(()=>Z(s().status_summary).bg)),()=>(H(s()),n(()=>Z(s().status_summary).emoji))],Wt),g(R,d)};A(Q,R=>{H(s()),n(()=>s().status_summary)&&R(bt)})}e(B);var Nt=r(B,2);{var Ot=R=>{var d=Re(),U=a(d);Te(U,{class:"w-4 h-4 text-orange-600"});var tt=r(U,2),G=a(tt);e(tt),e(d),I(()=>k(G,`心情: ${H(s()),n(()=>s().mood_summary)??""}`)),g(R,d)};A(Nt,R=>{H(s()),n(()=>s().mood_summary)&&R(Ot)})}e(L);var Lt=r(L,2),Ht=r(a(Lt),2);Gt(Ht,5,p,Kt,(R,d)=>{var U=Ke(),tt=a(U),G=a(tt),xt=a(G);{var Pt=rt=>{var ot=Fe(),nt=X(ot);ce(nt,{class:"w-4 h-4 text-gray-500"});var qt=r(nt,2),zt=a(qt,!0);e(qt),I(c=>k(zt,c),[()=>(t(d),n(()=>V(t(d).duration_minutes)))],Wt),g(rt,ot)};A(xt,rt=>{t(d),n(()=>t(d).duration_minutes)&&rt(Pt)})}e(G);var Yt=r(G,2);e(tt);var Rt=r(tt,2);{var Ft=rt=>{var ot=He(),nt=a(ot);{var qt=b=>{var N=Ze(),S=a(N);e(N),I((F,St,Et)=>{Xt(N,1,`status-badge ${F??""} ${St??""}`,"svelte-1m2g2l0"),k(S,`${Et??""} ${t(d),n(()=>t(d).status)??""}`)},[()=>(t(d),n(()=>Z(t(d).status).bg)),()=>(t(d),n(()=>Z(t(d).status).color)),()=>(t(d),n(()=>Z(t(d).status).emoji))],Wt),g(b,N)};A(nt,b=>{t(d),n(()=>t(d).status)&&b(qt)})}var zt=r(nt,2);{var c=b=>{var N=Be(),S=a(N);e(N),I(()=>k(S,`💭 ${t(d),n(()=>t(d).mood)??""}`)),g(b,N)};A(zt,b=>{t(d),n(()=>t(d).mood)&&b(c)})}e(ot),g(rt,ot)};A(Rt,rt=>{t(d),n(()=>t(d).status||t(d).mood)&&rt(Ft)})}var ae=r(Rt,2);{var Jt=rt=>{var ot=Ge(),nt=a(ot),qt=a(nt);e(nt);var zt=r(nt,2);Gt(zt,5,()=>(t(d),n(()=>Object.entries(ct(t(d).logged_sets)))),Kt,(c,b)=>{var N=_e(()=>pe(t(b),2));let S=()=>t(N)[0],F=()=>t(N)[1];var St=Ve(),Et=a(St),se=a(Et,!0);e(Et);var le=r(Et,2),ie=a(le),me=r(ie);{var fe=Zt=>{var Vt=he();I(()=>k(Vt,`@ ${F(),n(()=>F()[0].weight_kg)??""}kg`)),g(Zt,Vt)};A(me,Zt=>{F(),n(()=>{var Vt;return(Vt=F()[0])==null?void 0:Vt.weight_kg})&&Zt(fe)})}e(le),e(St),I(()=>{k(se,S()),k(ie,`${F(),n(()=>F().length)??""}组 × ${F(),n(()=>{var Zt;return((Zt=F()[0])==null?void 0:Zt.reps)||"?"})??""}次 `)}),g(c,St)}),e(zt),e(ot),I(c=>k(qt,`共 ${c??""} 个动作，
												${t(d),n(()=>t(d).logged_sets.length)??""} 组`),[()=>(t(d),n(()=>new Set(t(d).logged_sets.map(c=>c.exercise_name)).size))],Wt),g(rt,ot)};A(ae,rt=>{t(d),n(()=>t(d).logged_sets&&t(d).logged_sets.length>0)&&rt(Jt)})}e(U),K("click",Yt,()=>mt(t(d).id)),g(R,U)}),e(Ht),e(Lt),I(()=>k(O,(H(s()),n(()=>s().log_count)))),g(j,P)},m=j=>{var P=Je();g(j,P)};A(gt,j=>{H(s()),n(()=>s()&&s().log_count>0)?j(jt):j(m,!1)})}e(ht);var l=r(ht,2),y=a(l),M=a(y,!0);e(y);var at=r(y,2);e(l),e($),e(h),I(j=>{k(Tt,` ${j??""}`),k(M,(H(s()),n(()=>{var P;return(P=s())!=null&&P.log_count?"添加新训练":"开始记录训练"})))},[()=>(H(u()),n(()=>T(u())))],Wt),K("click",ut,f),K("click",y,dt),K("click",at,f),K("click",h,ft),K("keydown",h,Ct),g(x,h)};A(Mt,x=>{o()&&x(vt)})}g(D,_t),ee()}var ta=w('<div class="stat-item svelte-1f9q3us"><!> <span>今日已完成</span></div>'),ea=w('<div class="stats-section svelte-1f9q3us"><div class="stat-item svelte-1f9q3us"><!> <span> </span></div> <!></div>'),aa=w('<button class="secondary-button svelte-1f9q3us">设置提醒</button>'),sa=w('<div role="alert"><div class="notification-header svelte-1f9q3us"><div class="flex items-center"><!> <h3 class="notification-title svelte-1f9q3us"> </h3></div> <button class="p-1 rounded hover:bg-black hover:bg-opacity-10 transition-colors" aria-label="关闭通知"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="notification-content svelte-1f9q3us"><p class="notification-message svelte-1f9q3us"> </p> <div class="encouragement-section svelte-1f9q3us"><div class="encouragement-text svelte-1f9q3us"> </div></div> <!> <div class="action-section svelte-1f9q3us"><button> </button> <!></div></div></div>');function ra(D,i){te(i,!1);const o=z(),u=z(),s=re();let p=$t(i,"streakDays",8,0),v=$t(i,"lastWorkoutDate",8,null),f=$t(i,"showNotification",8,!0),T=z(null),V=z(0),Z=z(!1);function dt(){if(!v())return 999;const h=new Date,$=new Date(v()),et=h.getTime()-$.getTime();return Math.floor(et/(1e3*60*60*24))}function mt(){_(V,dt()),p()===0&&t(V)>=2?_(T,"streak_broken"):p()>0&&t(V)===1?_(T,"at_risk"):p()>=1&&p()<=6?_(T,"good_streak"):p()>=7?_(T,"long_streak"):_(T,null),_(Z,f()&&t(T)!==null)}function ft(){switch(t(T)){case"streak_broken":return{type:"warning",icon:je,title:"连续打卡已中断",message:`已经${t(V)}天没有训练了，重新开始永远不晚！`,encouragement:["每一次重新开始都是一个新的机会 💪","小步前进胜过原地踏步 🚀","今天就是重新开始的最佳时机！"],actionText:"开始训练",bgColor:"bg-orange-50",borderColor:"border-orange-200",textColor:"text-orange-800",iconColor:"text-orange-600"};case"at_risk":return{type:"alert",icon:ve,title:"连续记录面临中断",message:`您已经连续训练${p()}天，昨天没有训练可能会中断连续记录！`,encouragement:["坚持了这么久，不要轻易放弃 🔥","今天训练一下，保持连续记录","习惯的力量就是持续的小行动"],actionText:"继续打卡",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",textColor:"text-yellow-800",iconColor:"text-yellow-600"};case"good_streak":return{type:"success",icon:ge,title:"连续训练进行中",message:`太棒了！您已经连续训练${p()}天，习惯正在养成中！`,encouragement:["持续的努力正在带来改变 🌟","每一天的坚持都值得赞赏","继续保持这个美好的节奏！"],actionText:"查看进度",bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-800",iconColor:"text-green-600"};case"long_streak":return{type:"celebration",icon:ue,title:"连续训练成就",message:`令人佩服！您已经连续训练${p()}天，这是真正的毅力体现！`,encouragement:["您的坚持令人敬佩！🎉","这样的毅力一定会带来惊人的成果","您已经证明了自己的决心和毅力"],actionText:"分享成就",bgColor:"bg-purple-50",borderColor:"border-purple-200",textColor:"text-purple-800",iconColor:"text-purple-600"};default:return null}}function Ct(){switch(t(T)){case"streak_broken":case"at_risk":s("startWorkout");break;case"good_streak":s("viewProgress");break;case"long_streak":s("shareAchievement",{streakDays:p()});break}}function ct(){_(Z,!1),s("close")}function _t(h){const $=Math.floor(Math.random()*h.length);return h[$]}oe(()=>{mt()}),Bt(()=>H(f()),()=>{f()&&mt()}),Bt(()=>{},()=>{_(o,ft())}),Bt(()=>t(o),()=>{_(u,t(o)?_t(t(o).encouragement):"")}),ne(),Ut();var Mt=it(),vt=X(Mt);{var x=h=>{var $=sa(),et=a($),J=a(et),pt=a(J);Ce(pt,()=>t(o).icon,(q,W)=>{W(q,{get class(){return`notification-icon ${t(o),n(()=>t(o).iconColor)??""}`}})});var Tt=r(pt,2),ut=a(Tt,!0);e(Tt),e(J);var It=r(J,2);e(et);var ht=r(et,2),gt=a(ht),jt=a(gt,!0);e(gt);var m=r(gt,2),l=a(m),y=a(l,!0);e(l),e(m);var M=r(m,2);{var at=q=>{var W=ea(),C=a(W),O=a(C);Qt(O,{get class(){return`w-4 h-4 ${t(o),n(()=>t(o).iconColor)??""}`}});var E=r(O,2),Y=a(E);e(E),e(C);var Q=r(C,2);{var bt=Nt=>{var Ot=ta(),Lt=a(Ot);ve(Lt,{class:"w-4 h-4 text-green-600"}),lt(2),e(Ot),g(Nt,Ot)};A(Q,Nt=>{t(V)===0&&Nt(bt)})}e(W),I(()=>k(Y,`连续 ${p()??""} 天`)),g(q,W)};A(M,q=>{(t(T)==="good_streak"||t(T)==="long_streak")&&q(at)})}var j=r(M,2),P=a(j),L=a(P,!0);e(P);var B=r(P,2);{var st=q=>{var W=aa();K("click",W,()=>s("setReminder")),g(q,W)};A(B,q=>{(t(T)==="streak_broken"||t(T)==="at_risk")&&q(st)})}e(j),e(ht),e($),I(()=>{Xt($,1,`notification-card ${t(o),n(()=>t(o).bgColor)??""} ${t(o),n(()=>t(o).borderColor)??""} ${t(o),n(()=>t(o).textColor)??""}`,"svelte-1f9q3us"),k(ut,(t(o),n(()=>t(o).title))),k(jt,(t(o),n(()=>t(o).message))),k(y,t(u)),Xt(P,1,`px-4 py-2 rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 ${t(o),n(()=>t(o).type)??""}`,"svelte-1f9q3us"),k(L,(t(o),n(()=>t(o).actionText)))}),K("click",It,ct),K("click",P,Ct),g(h,$)};A(vt,h=>{t(Z)&&t(o)&&h(x)})}g(D,Mt),ee()}var oa=w('<meta name="description" content="查看训练打卡日历，追踪训练习惯和进度"/>'),na=w('<div class="mb-6"><div class="bg-red-50 border border-red-200 rounded-lg p-4"><div class="flex"><div class="text-red-400">⚠️</div> <div class="ml-3"><h3 class="text-sm font-medium text-red-800">数据加载失败</h3> <p class="text-sm text-red-700 mt-1"> </p> <button class="mt-2 text-sm text-red-600 hover:text-red-800 underline">重新加载</button></div></div></div></div>'),la=w('<div class="flex justify-center items-center py-20"><div class="animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500"></div> <span class="ml-4 text-xl text-gray-600">正在加载日历数据...</span></div>'),ia=w('<div class="min-h-screen bg-gray-50 py-8"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="text-center mb-8"><h1 class="text-3xl font-bold text-gray-900 mb-2 flex items-center justify-center"><!> 训练日历</h1> <p class="text-gray-600">追踪您的训练打卡记录，养成良好的训练习惯</p></div> <!> <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"><div class="bg-white rounded-lg shadow-md p-6 border border-gray-200"><div class="flex items-center justify-between"><div><p class="text-sm text-gray-600">连续打卡</p> <p class="text-2xl font-bold text-orange-600"> </p> <p class="text-xs text-gray-500">天</p></div> <!></div></div> <div class="bg-white rounded-lg shadow-md p-6 border border-gray-200"><div class="flex items-center justify-between"><div><p class="text-sm text-gray-600">本月训练</p> <p class="text-2xl font-bold text-blue-600"> </p> <p class="text-xs text-gray-500">次</p></div> <!></div></div> <div class="bg-white rounded-lg shadow-md p-6 border border-gray-200"><div class="flex items-center justify-between"><div><p class="text-sm text-gray-600">训练时长</p> <p class="text-2xl font-bold text-green-600"> </p> <p class="text-xs text-gray-500">小时</p></div> <!></div></div> <div class="bg-white rounded-lg shadow-md p-6 border border-gray-200"><div class="flex items-center justify-between"><div><p class="text-sm text-gray-600">活跃天数</p> <p class="text-2xl font-bold text-purple-600"> </p> <p class="text-xs text-gray-500">天</p></div> <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center"><span class="text-purple-600 font-bold">📅</span></div></div></div></div> <!> <!> <div class="mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6"><h3 class="text-lg font-semibold text-blue-800 mb-3">📖 使用说明</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-700"><div><p class="mb-2"><strong>颜色说明：</strong></p> <ul class="space-y-1"><li>• 绿色深浅代表训练强度</li> <li>• 圆点表示状态（🟢良好 🟡疲劳 🔴低效）</li> <li>• 小点数量表示训练次数</li></ul></div> <div><p class="mb-2"><strong>操作说明：</strong></p> <ul class="space-y-1"><li>• 点击日期查看详细记录</li> <li>• 点击"今天"快速回到当前月</li> <li>• 连续训练可获得打卡天数</li></ul></div></div></div> <div class="mt-8 text-center"><button class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg transition-colors font-medium">← 返回首页</button></div></div></div> <!>',1);function wa(D,i){te(i,!1);const[o,u]=$e(),s=()=>ye(ke,"$user",o),p=z();let v=z(new Date().getFullYear()),f=z(new Date().getMonth()+1),T=z([]),V=z(0),Z=z(!0),dt=z(""),mt=z(!1),ft=z(""),Ct=z(null),ct=z([]),_t=z(null),Mt=z(!0);async function vt(){if(!s()){At("/auth");return}_(Z,!0),_(dt,"");try{const[c,b,N]=await Promise.all([fetch(`/api/calendar-summary?year=${t(v)}&month=${t(f)}`),fetch("/api/streak-days"),fetch("/api/last-workout")]);if(c.ok){const S=await c.json();_(T,S.data||[])}else{const S=await c.json();console.error("获取日历数据失败:",S),_(dt,S.error||"获取日历数据失败")}if(b.ok){const S=await b.json();_(V,S.streak_days||0)}else console.error("获取连续打卡天数失败"),_(V,0);if(N.ok){const S=await N.json();_(_t,S.last_workout_date)}else console.error("获取最后训练日期失败"),_(_t,null)}catch(c){console.error("加载日历数据时发生错误:",c),_(dt,"网络错误，请稍后重试")}finally{_(Z,!1)}}function x(c){_(v,c.detail.year),_(f,c.detail.month),vt()}async function h(c){_(ft,c.detail.date),_(Ct,c.detail.data||null),await $(t(ft)),_(mt,!0)}async function $(c){try{const b=await fetch(`/api/logs?date=${c}`);if(b.ok){const N=await b.json();_(ct,N||[])}else console.error("获取当日训练日志失败"),_(ct,[])}catch(b){console.error("加载当日训练日志时发生错误:",b),_(ct,[])}}function et(){_(mt,!1),_(ft,""),_(Ct,null),_(ct,[])}function J(c){const b=c.detail.date;At(`/log?date=${b}`)}function pt(c){const b=c.detail.logId;At(`/log?edit=${b}`)}function Tt(){const c=t(T).reduce((S,F)=>S+F.log_count,0),b=t(T).reduce((S,F)=>S+(F.total_duration_minutes||0),0),N=t(T).filter(S=>S.log_count>0).length;return{totalWorkouts:c,totalDuration:Math.round(b/60*10)/10,activeDays:N,averagePerDay:N>0?Math.round(c/N*10)/10:0}}function ut(){At("/log")}function It(){At("/progress")}function ht(c){alert(`您已经连续训练${c.detail.streakDays}天！太棒了！`)}function gt(){alert("提醒功能即将推出，请手动设置手机提醒。")}function jt(){_(Mt,!1),localStorage.setItem("streak_notification_closed",Date.now().toString())}oe(()=>{s()&&vt()}),Bt(()=>(s(),At),()=>{s()===null&&At("/auth")}),Bt(()=>{},()=>{_(p,Tt())}),ne(),Ut();var m=ia();be(c=>{var b=oa();xe.title="训练日历 - 训练计划系统",g(c,b)});var l=X(m),y=a(l),M=a(y),at=a(M),j=a(at);Qt(j,{class:"w-8 h-8 mr-3 text-blue-600"}),lt(),e(at),lt(2),e(M);var P=r(M,2);ra(P,{get streakDays(){return t(V)},get lastWorkoutDate(){return t(_t)},get showNotification(){return t(Mt)},$$events:{startWorkout:ut,viewProgress:It,shareAchievement:ht,setReminder:gt,close:jt}});var L=r(P,2),B=a(L),st=a(B),q=a(st),W=r(a(q),2),C=a(W,!0);e(W),lt(2),e(q);var O=r(q,2);Se(O,{class:"w-8 h-8 text-orange-500"}),e(st),e(B);var E=r(B,2),Y=a(E),Q=a(Y),bt=r(a(Q),2),Nt=a(bt,!0);e(bt),lt(2),e(Q);var Ot=r(Q,2);ge(Ot,{class:"w-8 h-8 text-blue-500"}),e(Y),e(E);var Lt=r(E,2),Ht=a(Lt),R=a(Ht),d=r(a(R),2),U=a(d,!0);e(d),lt(2),e(R);var tt=r(R,2);Qt(tt,{class:"w-8 h-8 text-green-500"}),e(Ht),e(Lt);var G=r(Lt,2),xt=a(G),Pt=a(xt),Yt=r(a(Pt),2),Rt=a(Yt,!0);e(Yt),lt(2),e(Pt),lt(2),e(xt),e(G),e(L);var Ft=r(L,2);{var ae=c=>{var b=na(),N=a(b),S=a(N),F=r(a(S),2),St=r(a(F),2),Et=a(St,!0);e(St);var se=r(St,2);e(F),e(S),e(N),e(b),I(()=>k(Et,t(dt))),K("click",se,vt),g(c,b)};A(Ft,c=>{t(dt)&&c(ae)})}var Jt=r(Ft,2);{var rt=c=>{var b=la();g(c,b)},ot=c=>{Oe(c,{get calendarData(){return t(T)},get currentYear(){return t(v)},get currentMonth(){return t(f)},$$events:{monthChange:x,dayClick:h}})};A(Jt,c=>{t(Z)?c(rt):c(ot,!1)})}var nt=r(Jt,4),qt=a(nt);e(nt),e(y),e(l);var zt=r(l,2);Ue(zt,{get isOpen(){return t(mt)},get selectedDate(){return t(ft)},get calendarData(){return t(Ct)},get workoutLogs(){return t(ct)},$$events:{close:et,createLog:J,editLog:pt}}),I(()=>{k(C,t(V)),k(Nt,(t(p),n(()=>t(p).totalWorkouts))),k(U,(t(p),n(()=>t(p).totalDuration))),k(Rt,(t(p),n(()=>t(p).activeDays)))}),K("click",qt,()=>At("/")),g(D,m),ee(),u()}export{wa as component};
