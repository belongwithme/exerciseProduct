const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DCeWzeEF.js","./CWj6FrbW.js","./BTdtOKhu.js","./CDvu5KIv.js","./pr_9b7ab.js","./DtTT7JPL.js","./CaJesokv.js","./BrlEh5uC.js","./CVgBfsKF.js","./CXBPNQEL.js","./0hSlB86f.js","./Bfc47y5P.js","./C6rgrwdz.js","./x2EdFAPA.js","./Dp1pzeXC.js","./fNyos_Jn.js","./BMDv3NVz.js","./aTO4JCV3.js","./BmpHNf-a.js","./B1Bw7QfG.js","./CJndmnKG.js"])))=>i.map(i=>d[i]);
import{_ as Y}from"./Dp1pzeXC.js";import"./CWj6FrbW.js";import{i as Ae}from"./BTdtOKhu.js";import{av as H,q as w,b as c,p as Oe,am as Se,o as ue,f as k,e as E,c as Fe,d as l,s as i,i as o,m as g,n as Be,r as n,u as v,g as e,t as O,j as z}from"./CDvu5KIv.js";import{i as N,s as Ge,a as Je}from"./pr_9b7ab.js";import{e as pe,i as Ke}from"./DtTT7JPL.js";import{c as Z}from"./CPD9YRgb.js";import{l as ee,s as te,p as Qe}from"./C6rgrwdz.js";import{I as ae,P as Ue}from"./fNyos_Jn.js";import{s as re}from"./BMDv3NVz.js";function We(_,p){const b=ee(p,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.525.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const x=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}],["path",{d:"M12 7v5l4 2"}]];ae(_,te({name:"history"},()=>b,{get iconNode(){return x},children:(h,M)=>{var d=H(),f=w(d);re(f,p,"default",{}),c(h,d)},$$slots:{default:!0}}))}function Xe(_,p){const b=ee(p,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.525.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const x=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"}]];ae(_,te({name:"square-pen"},()=>b,{get iconNode(){return x},children:(h,M)=>{var d=H(),f=w(d);re(f,p,"default",{}),c(h,d)},$$slots:{default:!0}}))}function Ye(_,p){const b=ee(p,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.525.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const x=[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]];ae(_,te({name:"trash-2"},()=>b,{get iconNode(){return x},children:(h,M)=>{var d=H(),f=w(d);re(f,p,"default",{}),c(h,d)},$$slots:{default:!0}}))}var Ze=k("<li> </li>"),et=k('<li class="text-gray-500"> </li>'),tt=k('<div class="bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden transition-transform duration-300 hover:-translate-y-1"><div class="p-6"><div class="flex justify-between items-start"><h2 class="text-xl font-bold text-gray-800 dark:text-white mb-2"> </h2> <div class="flex space-x-2"><button class="text-gray-500 hover:text-blue-600 p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700" title="编辑计划"><!></button> <button class="text-gray-500 hover:text-purple-600 p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700" title="版本历史"><!></button> <button class="text-gray-500 hover:text-red-600 p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700" title="删除计划"><!></button></div></div> <p class="text-gray-600 dark:text-gray-400 mb-4 h-12 overflow-hidden"> </p> <div class="mt-4 border-t pt-4"><h4 class="font-semibold mb-2">包含动作:</h4> <ul class="list-disc list-inside text-sm text-gray-600 dark:text-gray-300"><!> <!></ul></div></div></div>'),at=k('<div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3"></div>'),rt=k('<div class="text-center py-16 bg-white dark:bg-gray-800 rounded-lg shadow-md"><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path vector-effect="non-scaling-stroke" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"></path></svg> <h3 class="mt-2 text-xl font-medium text-gray-900 dark:text-white">暂无训练计划</h3> <p class="mt-1 text-gray-500">开始创建你的第一个训练计划吧！</p></div>'),ot=k('<div class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"><div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md"><h2 class="text-lg font-bold mb-4">确认删除</h2> <p> </p> <div class="mt-6 flex justify-end space-x-4"><button class="px-4 py-2 rounded bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500">取消</button> <button class="px-4 py-2 rounded bg-red-600 text-white hover:bg-red-700">删除</button></div></div></div>'),st=k('<div class="container mx-auto p-4 md:p-8"><div class="flex justify-between items-center mb-6 border-b pb-2"><h1 class="text-3xl font-bold text-gray-800 dark:text-white">我的训练计划</h1> <button class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"><!> 新建计划</button></div> <!></div> <!> <!> <!> <!>',1);function gt(_,p){Oe(p,!1);const[b,x]=Ge(),h=()=>Je(d,"$plans",b);let M=Qe(p,"data",8);const d=Se(M().plans||[]);ue(()=>{M().plans&&d.set(M().plans)});let f=g(!1),L=g(!1),C=g(!1),S=g(!1),F=g(null),y=g(null),u=g(null),$=g(null);function fe(){o(F,null),o(f,!0)}function me(t){o(F,t),o(f,!0)}function ge(t){o(y,t),o(L,!0)}function he(t){o(u,t),o(C,!0)}async function _e(t){const a=t.detail;a.id?d.update(s=>s.map(r=>r.id===a.id?a:r)):d.update(s=>[...s,a]),o(f,!1)}async function be(){if(!e(y))return;(await fetch(`/api/plans/${e(y).id}`,{method:"DELETE"})).ok?(d.update(a=>a.filter(s=>s.id!==e(y).id)),o(y,null),o(L,!1)):console.error("删除失败")}function xe(){o(C,!1),o(u,null)}function ye(){window.location.reload()}function $e(t){const{version1:a,version2:s}=t.detail;o($,{version1:a,version2:s}),o(S,!0),o(C,!1)}function we(){o(S,!1),o($,null),o(C,!0)}let B=g(),G=g(),J=g();ue(async()=>{const[t,a,s]=await Promise.all([Y(()=>import("./DCeWzeEF.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),import.meta.url),Y(()=>import("./aTO4JCV3.js"),__vite__mapDeps([17,1,2,3,4,5,7,12,13,14,18,16,15,6,8,9,19]),import.meta.url),Y(()=>import("./CJndmnKG.js"),__vite__mapDeps([20,1,2,3,4,5,7,12,18,16,15,6,8,9]),import.meta.url)]);o(B,t.default),o(G,a.default),o(J,s.default)}),Ae();var oe=st(),K=w(oe),Q=l(K),U=i(l(Q),2),ke=l(U);Ue(ke,{class:"w-5 h-5 mr-2"}),Be(),n(U),n(Q);var Me=i(Q,2);{var Pe=t=>{var a=at();pe(a,5,h,s=>s.id,(s,r)=>{var m=tt(),D=l(m),P=l(D),I=l(P),R=l(I,!0);n(I);var ie=i(I,2),q=l(ie),Ie=l(q);Xe(Ie,{class:"w-4 h-4"}),n(q);var A=i(q,2),Te=l(A);We(Te,{class:"w-4 h-4"}),n(A);var W=i(A,2),je=l(W);Ye(je,{class:"w-4 h-4"}),n(W),n(ie),n(P);var X=i(P,2),ze=l(X,!0);n(X);var de=i(X,2),ve=i(l(de),2),ce=l(ve);pe(ce,1,()=>(e(r),v(()=>e(r).plan_exercises.slice(0,3))),Ke,(T,V)=>{var j=Ze(),qe=l(j,!0);n(j),O(()=>z(qe,(e(V),v(()=>e(V).exercises.name)))),c(T,j)});var Le=i(ce,2);{var Re=T=>{var V=et(),j=l(V);n(V),O(()=>z(j,`...等 ${e(r),v(()=>e(r).plan_exercises.length)??""} 个动作`)),c(T,V)};N(Le,T=>{e(r),v(()=>e(r).plan_exercises.length>3)&&T(Re)})}n(ve),n(de),n(D),n(m),O(()=>{z(R,(e(r),v(()=>e(r).name))),z(ze,(e(r),v(()=>e(r).description||"暂无描述")))}),E("click",q,()=>me(e(r))),E("click",A,()=>he(e(r))),E("click",W,()=>ge(e(r))),c(s,m)}),n(a),c(t,a)},Ve=t=>{var a=rt();c(t,a)};N(Me,t=>{h(),v(()=>h()&&h().length>0)?t(Pe):t(Ve,!1)})}n(K);var se=i(K,2);{var Ee=t=>{var a=H(),s=w(a);Z(s,()=>e(B),(r,m)=>{m(r,{get plan(){return e(F)},$$events:{save:_e,close:()=>o(f,!1)}})}),c(t,a)};N(se,t=>{e(f)&&e(B)&&t(Ee)})}var ne=i(se,2);{var Ne=t=>{var a=H(),s=w(a);Z(s,()=>e(G),(r,m)=>{m(r,{get planId(){return e(u),v(()=>e(u).id)},get planName(){return e(u),v(()=>e(u).name)},$$events:{close:xe,revertSuccess:ye,compare:$e}})}),c(t,a)};N(ne,t=>{e(C)&&e(G)&&e(u)&&t(Ne)})}var le=i(ne,2);{var He=t=>{var a=H(),s=w(a);Z(s,()=>e(J),(r,m)=>{m(r,{get planId(){return e(u),v(()=>e(u).id)},get planName(){return e(u),v(()=>e(u).name)},get version1Number(){return e($),v(()=>e($).version1)},get version2Number(){return e($),v(()=>e($).version2)},$$events:{close:we}})}),c(t,a)};N(le,t=>{e(S)&&e(J)&&e(u)&&e($)&&t(He)})}var Ce=i(le,2);{var De=t=>{var a=ot(),s=l(a),r=i(l(s),2),m=l(r);n(r);var D=i(r,2),P=l(D),I=i(P,2);n(D),n(s),n(a),O(()=>z(m,`你确定要删除训练计划 "${e(y),v(()=>{var R;return(R=e(y))==null?void 0:R.name})??""}" 吗？此操作无法撤销。`)),E("click",P,()=>o(L,!1)),E("click",I,be),c(t,a)};N(Ce,t=>{e(L)&&t(De)})}E("click",U,fe),c(_,oe),Fe(),x()}export{We as H,Ye as T,gt as _};
